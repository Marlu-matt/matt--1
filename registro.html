<!DOCTYPE html>
<html lang="es">
<head>
  <meta charset="UTF-8">
  <title>Registro de Usuario</title>
  <link rel="stylesheet" href="../../protodiseñomatt.css"/>
  
</head>
<body>
  <style>
    body {
      margin:0;
    }
  </style>
    <div class="record">
  <form id="registroForm">
    <img src="contenido-index/Picsart_25-06-13_21-57-16-227.png" alt="logo" class="logo">
    <h3><i>Registro</i></h3>

    <label for="nombre">Nombre:</label>
    <input type="text" id="nombre" name="nombre" required>

    <label for="apellido">Apellido:</label>
    <input type="text" id="apellido" name="apellido" required>

    <label for="usuario">Usuario:</label>
    <input type="text" id="usuario" name="usuario" required>

    <label for="correo">Correo:</label>
    <input type="email" id="correo" name="correo" required>

  <label for="password">contraseña:</label>
  <input type="password" id="password" name="password" required>

  <label for="confirmPassword">Confirmar contraseña:</label>
  <input type="password" id="confirmPassword" name="confirmPassword" required>

    <div class="error" id="errorMensaje"></div>

    <input type="submit" value="Registrarse">
  </form>
  </div>
  <script src="diseño/protodetallematt.js"></script>

<script>
document.getElementById('registroForm').addEventListener('submit', function(e) {
  e.preventDefault();

  const nombre = document.getElementById('nombre').value;
  const correo = document.getElementById('correo').value;
  const password = document.getElementById('password').value;
  const apellido = document.getElementById('apellido').value;
  const usuario = document.getElementById('usuario').value;
  const confirmPassword = document.getElementById('confirmPassword').value;
  const errorMensaje = document.getElementById('errorMensaje');

  if (password !== confirmPassword) {
    errorMensaje.textContent = 'Las contraseñas no coinciden';
    return;
  }

  fetch('http://localhost:3001/registrar', {
    method: 'POST',
    headers: {
      'Content-Type': 'application/json'
    },
    body: JSON.stringify({ nombre, correo, password, apellido, usuario })
  })
  .then(res => res.json())
  .then(data => {
    if (data.error) {
      errorMensaje.textContent = data.error;
    } else {
      errorMensaje.style.color = 'green';
      errorMensaje.textContent = data.mensaje; 
      document.getElementById('registroForm').reset();
    }
  })
  .catch(err => {
    errorMensaje.textContent = 'Error al conectar con el servidor';
  });
});
</script>

</body>
</html>
